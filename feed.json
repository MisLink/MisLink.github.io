{
    "version": "https://jsonfeed.org/version/1",
    "title": "Opstio Blog",
    "home_page_url": "https://blog.uoiai.me",
    "description": "Opstio Blog",
    "items": [
        {
            "id": "https://blog.uoiai.me/2022/02/05/minimum-free-id",
            "content_html": "<h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"什么是最小可用-id\">什么是最小可用 id？<a href=\"https://blog.uoiai.me/2022/02/05/minimum-free-id#%E4%BB%80%E4%B9%88%E6%98%AF%E6%9C%80%E5%B0%8F%E5%8F%AF%E7%94%A8-id\" class=\"hash-link\" aria-label=\"什么是最小可用 id？的直接链接\" title=\"什么是最小可用 id？的直接链接\">​</a></h2>\n<p>很多数据都包含 id 这个概念，通常情况下是非负整数，用来唯一标识一条数据。很多 id 处于使用中的状态，也就是已经绑定到一条数据，而另一些 id 处于未使用的状态，可以分配给新的数据。最小可用 id 就是这些数据中最小的可分配 id。</p>\n<p>例如，下面是正在使用中的 id：</p>\n<div class=\"codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#403f53;--prism-background-color:#FBFBFB\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-text codeBlock_bY9V thin-scrollbar\" style=\"color:#403f53;background-color:#FBFBFB\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#403f53\"><span class=\"token plain\">[13, 2, 5, 0, 1, 9, 12, 8, 11, 14]</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"复制代码到剪贴板\" title=\"复制\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<p>最小可用 id 就是不在这个列表中的最小的非负整数，即 3。</p>\n<h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"naïve-的解法\">naïve 的解法<a href=\"https://blog.uoiai.me/2022/02/05/minimum-free-id#na%C3%AFve-%E7%9A%84%E8%A7%A3%E6%B3%95\" class=\"hash-link\" aria-label=\"naïve 的解法的直接链接\" title=\"naïve 的解法的直接链接\">​</a></h2>\n<p>最直观的方法如下：</p>\n<div class=\"language-python codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#403f53;--prism-background-color:#FBFBFB\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-python codeBlock_bY9V thin-scrollbar\" style=\"color:#403f53;background-color:#FBFBFB\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#403f53\"><span class=\"token keyword\" style=\"color:rgb(12, 150, 155)\">def</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:rgb(153, 76, 195);font-style:italic\">brute_force</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">(</span><span class=\"token plain\">lst</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">)</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#403f53\"><span class=\"token plain\">  i </span><span class=\"token operator\" style=\"color:rgb(12, 150, 155)\">=</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(170, 9, 130)\">0</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#403f53\"><span class=\"token plain\">  </span><span class=\"token keyword\" style=\"color:rgb(12, 150, 155)\">while</span><span class=\"token plain\"> </span><span class=\"token boolean\" style=\"color:rgb(188, 84, 84)\">True</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#403f53\"><span class=\"token plain\">      </span><span class=\"token keyword\" style=\"color:rgb(12, 150, 155)\">if</span><span class=\"token plain\"> i </span><span class=\"token keyword\" style=\"color:rgb(12, 150, 155)\">not</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:rgb(12, 150, 155)\">in</span><span class=\"token plain\"> lst</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#403f53\"><span class=\"token plain\">          </span><span class=\"token keyword\" style=\"color:rgb(12, 150, 155)\">return</span><span class=\"token plain\"> i</span><br></span><span class=\"token-line\" style=\"color:#403f53\"><span class=\"token plain\">      i </span><span class=\"token operator\" style=\"color:rgb(12, 150, 155)\">+=</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(170, 9, 130)\">1</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"复制代码到剪贴板\" title=\"复制\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<p>以上 Python 代码中，<code>in</code> 操作是线性的，这意味着上述代码的时间复杂度为 $O(n^2)$。对于 10 万个 id 而言，该程序平均需要 11.5s 才能得到答案。</p>\n<h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"改进一\">改进一<a href=\"https://blog.uoiai.me/2022/02/05/minimum-free-id#%E6%94%B9%E8%BF%9B%E4%B8%80\" class=\"hash-link\" aria-label=\"改进一的直接链接\" title=\"改进一的直接链接\">​</a></h2>\n<p>改进上述解法的关键是：</p>\n<blockquote>\n<p>对于 $n$ 个非负整数 $x_1, x_2, ..., x_n$ ，如果存在小于 $n$ 的可用整数，则必然存在某个 $x_i$ 不在 $[0, n)$ 的范围内；否则这些整数必然为 $0, 1, ..., n-1$ 的排列，这时最小的可用整数为 $n$。</p>\n</blockquote>\n<p>于是可以得出如下结论：\n在这一结论的基础下，可以使用长度为 n + 1 的数组标记区间 $[0, n]$ 内的某个整数是否可用：</p>\n<p>$minFree(x_1, x_2, ..., x_n) \\leqslant n$</p>\n<div class=\"language-python codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#403f53;--prism-background-color:#FBFBFB\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-python codeBlock_bY9V thin-scrollbar\" style=\"color:#403f53;background-color:#FBFBFB\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#403f53\"><span class=\"token keyword\" style=\"color:rgb(12, 150, 155)\">def</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:rgb(153, 76, 195);font-style:italic\">min_free</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">(</span><span class=\"token plain\">lst</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">)</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#403f53\"><span class=\"token plain\">  n </span><span class=\"token operator\" style=\"color:rgb(12, 150, 155)\">=</span><span class=\"token plain\"> </span><span class=\"token builtin\" style=\"color:rgb(72, 118, 214)\">len</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">(</span><span class=\"token plain\">lst</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#403f53\"><span class=\"token plain\">  flags </span><span class=\"token operator\" style=\"color:rgb(12, 150, 155)\">=</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">[</span><span class=\"token boolean\" style=\"color:rgb(188, 84, 84)\">False</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:rgb(12, 150, 155)\">for</span><span class=\"token plain\"> i </span><span class=\"token keyword\" style=\"color:rgb(12, 150, 155)\">in</span><span class=\"token plain\"> </span><span class=\"token builtin\" style=\"color:rgb(72, 118, 214)\">range</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">(</span><span class=\"token plain\">n </span><span class=\"token operator\" style=\"color:rgb(12, 150, 155)\">+</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(170, 9, 130)\">1</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">)</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">]</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#403f53\"><span class=\"token plain\">  </span><span class=\"token keyword\" style=\"color:rgb(12, 150, 155)\">for</span><span class=\"token plain\"> i </span><span class=\"token keyword\" style=\"color:rgb(12, 150, 155)\">in</span><span class=\"token plain\"> lst</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#403f53\"><span class=\"token plain\">      </span><span class=\"token keyword\" style=\"color:rgb(12, 150, 155)\">if</span><span class=\"token plain\"> i </span><span class=\"token operator\" style=\"color:rgb(12, 150, 155)\">&lt;</span><span class=\"token plain\"> n</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#403f53\"><span class=\"token plain\">          flags</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">[</span><span class=\"token plain\">i</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">]</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(12, 150, 155)\">=</span><span class=\"token plain\"> </span><span class=\"token boolean\" style=\"color:rgb(188, 84, 84)\">True</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#403f53\"><span class=\"token plain\">  </span><span class=\"token keyword\" style=\"color:rgb(12, 150, 155)\">for</span><span class=\"token plain\"> i</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">,</span><span class=\"token plain\"> f </span><span class=\"token keyword\" style=\"color:rgb(12, 150, 155)\">in</span><span class=\"token plain\"> </span><span class=\"token builtin\" style=\"color:rgb(72, 118, 214)\">enumerate</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">(</span><span class=\"token plain\">flags</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">)</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#403f53\"><span class=\"token plain\">      </span><span class=\"token keyword\" style=\"color:rgb(12, 150, 155)\">if</span><span class=\"token plain\"> f </span><span class=\"token keyword\" style=\"color:rgb(12, 150, 155)\">is</span><span class=\"token plain\"> </span><span class=\"token boolean\" style=\"color:rgb(188, 84, 84)\">False</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#403f53\"><span class=\"token plain\">          </span><span class=\"token keyword\" style=\"color:rgb(12, 150, 155)\">return</span><span class=\"token plain\"> i</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"复制代码到剪贴板\" title=\"复制\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<p>该解法由三个步骤组成：</p>\n<ol>\n<li>第 3 行，初始化一个值全为 <code>False</code> 的标志数组，需要 $O(n)$ 的时间；</li>\n<li>第 4 ~ 6 行，遍历列表中的元素，将小于 n 的元素标记为 <code>True</code>，需要 $O(n)$ 的时间；</li>\n<li>第 7 ~ 9 行，遍历标志数组，返回第一个<code>False</code> 值的位置，需要 $O(n)$ 的时间；</li>\n</ol>\n<p>每个步骤所需的时间均为 $O(n)$ ，所以该解法的时间复杂度是线性的。</p>\n<p>这里用到了 n + 1 个标志，使这个解法无需额外处理就可以适配 <code>sorted(lst) = [0, 1, ... n - 1]</code> 的情况。</p>\n<p>这个解法的效率比上一个解法高得多：同样对于 10 万个 id，只需要 0.02s 就可以得到答案。</p>\n<p>该解法每次都需要申请一个长度为 n + 1 的数组，运行结束后这个数组又被释放掉了。为了对此进行优化，原书提供了对应的 C 语言实现的改进：</p>\n<ol>\n<li>预先准备好足够长的数组，然后每次都复用它；</li>\n<li>使用二进制位保存标志；</li>\n</ol>\n<p>以上改进减少了反复创建和销毁标志数组的时间，也减少了标志数组占据的空间，但是对应的位运算相比之前的布尔数组繁复了很多，在此就不再赘述。</p>\n<h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"改进二\">改进二<a href=\"https://blog.uoiai.me/2022/02/05/minimum-free-id#%E6%94%B9%E8%BF%9B%E4%BA%8C\" class=\"hash-link\" aria-label=\"改进二的直接链接\" title=\"改进二的直接链接\">​</a></h2>\n<p>上述的改进以空间上的消耗为代价获得了运行时间上的优化，但是在 n 特别大的情况下，空间上的损耗就不可忽略了。为此，新的改进基于分而治之的方法，将问题分解为若干规模较小的问题，然后逐步解决这些小问题，最终得到结果。</p>\n<p>对这个问题应用分治，可以得出如下解法：</p>\n<blockquote>\n<p>将所有满足 $x_i \\leqslant \\lfloor n/2 \\rfloor$ 的整数放入序列 $A'$，并将剩余的整数放入另一个序列 $A''$，根据上一个改进得出的结论，如果 $A'$ 的长度正好是 $\\lfloor n/2 \\rfloor$，这说明 $A'$ 已经“满”了，最小的可用整数一定在 $A''$ 中；否则，最小的可用整数一定在 $A'$ 中。</p>\n</blockquote>\n<p>在很多编程语言中都提供了划分操作：</p>\n<ol>\n<li>Haskell <code>Data.List.partition</code></li>\n</ol>\n<div class=\"language-haskell codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#403f53;--prism-background-color:#FBFBFB\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-haskell codeBlock_bY9V thin-scrollbar\" style=\"color:#403f53;background-color:#FBFBFB\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#403f53\"><span class=\"token import-statement keyword\" style=\"color:rgb(12, 150, 155)\">import</span><span class=\"token import-statement\"> Data</span><span class=\"token import-statement punctuation\" style=\"color:rgb(153, 76, 195)\">.</span><span class=\"token import-statement\">List</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#403f53\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#403f53\"><span class=\"token plain\"></span><span class=\"token hvariable\">bsearch</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(12, 150, 155)\">::</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">[</span><span class=\"token constant\" style=\"color:rgb(72, 118, 214)\">Int</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">]</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(12, 150, 155)\">-&gt;</span><span class=\"token plain\"> </span><span class=\"token constant\" style=\"color:rgb(72, 118, 214)\">Int</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(12, 150, 155)\">-&gt;</span><span class=\"token plain\"> </span><span class=\"token constant\" style=\"color:rgb(72, 118, 214)\">Int</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(12, 150, 155)\">-&gt;</span><span class=\"token plain\"> </span><span class=\"token constant\" style=\"color:rgb(72, 118, 214)\">Int</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#403f53\"><span class=\"token plain\"></span><span class=\"token hvariable\">bsearch</span><span class=\"token plain\"> </span><span class=\"token hvariable\">xs</span><span class=\"token plain\"> </span><span class=\"token hvariable\">l</span><span class=\"token plain\"> </span><span class=\"token hvariable\">u</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(12, 150, 155)\">|</span><span class=\"token plain\"> </span><span class=\"token builtin\" style=\"color:rgb(72, 118, 214)\">null</span><span class=\"token plain\"> </span><span class=\"token hvariable\">xs</span><span class=\"token plain\">                </span><span class=\"token operator\" style=\"color:rgb(12, 150, 155)\">=</span><span class=\"token plain\"> </span><span class=\"token hvariable\">l</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#403f53\"><span class=\"token plain\">               </span><span class=\"token operator\" style=\"color:rgb(12, 150, 155)\">|</span><span class=\"token plain\"> </span><span class=\"token builtin\" style=\"color:rgb(72, 118, 214)\">length</span><span class=\"token plain\"> </span><span class=\"token hvariable\">as</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(12, 150, 155)\">==</span><span class=\"token plain\"> </span><span class=\"token hvariable\">m</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(12, 150, 155)\">-</span><span class=\"token plain\"> </span><span class=\"token hvariable\">l</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(12, 150, 155)\">+</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(170, 9, 130)\">1</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(12, 150, 155)\">=</span><span class=\"token plain\"> </span><span class=\"token hvariable\">bsearch</span><span class=\"token plain\"> </span><span class=\"token hvariable\">bs</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">(</span><span class=\"token hvariable\">m</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(12, 150, 155)\">+</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(170, 9, 130)\">1</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">)</span><span class=\"token plain\"> </span><span class=\"token hvariable\">u</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#403f53\"><span class=\"token plain\">               </span><span class=\"token operator\" style=\"color:rgb(12, 150, 155)\">|</span><span class=\"token plain\"> </span><span class=\"token builtin\" style=\"color:rgb(72, 118, 214)\">otherwise</span><span class=\"token plain\">              </span><span class=\"token operator\" style=\"color:rgb(12, 150, 155)\">=</span><span class=\"token plain\"> </span><span class=\"token hvariable\">bsearch</span><span class=\"token plain\"> </span><span class=\"token hvariable\">as</span><span class=\"token plain\"> </span><span class=\"token hvariable\">l</span><span class=\"token plain\"> </span><span class=\"token hvariable\">m</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#403f53\"><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:rgb(12, 150, 155)\">where</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#403f53\"><span class=\"token plain\">  </span><span class=\"token hvariable\">m</span><span class=\"token plain\">        </span><span class=\"token operator\" style=\"color:rgb(12, 150, 155)\">=</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">(</span><span class=\"token hvariable\">l</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(12, 150, 155)\">+</span><span class=\"token plain\"> </span><span class=\"token hvariable\">u</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">)</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(12, 150, 155)\">`div`</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(170, 9, 130)\">2</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#403f53\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">(</span><span class=\"token hvariable\">as</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">,</span><span class=\"token plain\"> </span><span class=\"token hvariable\">bs</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">)</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(12, 150, 155)\">=</span><span class=\"token plain\"> </span><span class=\"token hvariable\">partition</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">(</span><span class=\"token operator\" style=\"color:rgb(12, 150, 155)\">&lt;=</span><span class=\"token plain\"> </span><span class=\"token hvariable\">m</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">)</span><span class=\"token plain\"> </span><span class=\"token hvariable\">xs</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#403f53\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#403f53\"><span class=\"token plain\"></span><span class=\"token hvariable\">minFree</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(12, 150, 155)\">::</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">[</span><span class=\"token constant\" style=\"color:rgb(72, 118, 214)\">Int</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">]</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(12, 150, 155)\">-&gt;</span><span class=\"token plain\"> </span><span class=\"token constant\" style=\"color:rgb(72, 118, 214)\">Int</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#403f53\"><span class=\"token plain\"></span><span class=\"token hvariable\">minFree</span><span class=\"token plain\"> </span><span class=\"token hvariable\">xs</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(12, 150, 155)\">=</span><span class=\"token plain\"> </span><span class=\"token hvariable\">bsearch</span><span class=\"token plain\"> </span><span class=\"token hvariable\">xs</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(170, 9, 130)\">0</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">(</span><span class=\"token builtin\" style=\"color:rgb(72, 118, 214)\">length</span><span class=\"token plain\"> </span><span class=\"token hvariable\">xs</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(12, 150, 155)\">-</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(170, 9, 130)\">1</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">)</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"复制代码到剪贴板\" title=\"复制\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<ol start=\"2\">\n<li>Python <code>列表推导式</code> 或 <code>filter</code></li>\n</ol>\n<div class=\"language-python codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#403f53;--prism-background-color:#FBFBFB\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-python codeBlock_bY9V thin-scrollbar\" style=\"color:#403f53;background-color:#FBFBFB\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#403f53\"><span class=\"token keyword\" style=\"color:rgb(12, 150, 155)\">def</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:rgb(153, 76, 195);font-style:italic\">min_free</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">(</span><span class=\"token plain\">lst</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">,</span><span class=\"token plain\"> l</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">,</span><span class=\"token plain\"> u</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">)</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#403f53\"><span class=\"token plain\">    m </span><span class=\"token operator\" style=\"color:rgb(12, 150, 155)\">=</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">(</span><span class=\"token plain\">l </span><span class=\"token operator\" style=\"color:rgb(12, 150, 155)\">+</span><span class=\"token plain\"> u</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">)</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(12, 150, 155)\">//</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(170, 9, 130)\">2</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#403f53\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:rgb(12, 150, 155)\">if</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:rgb(12, 150, 155)\">not</span><span class=\"token plain\"> lst</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#403f53\"><span class=\"token plain\">        </span><span class=\"token keyword\" style=\"color:rgb(12, 150, 155)\">return</span><span class=\"token plain\"> l</span><br></span><span class=\"token-line\" style=\"color:#403f53\"><span class=\"token plain\">    left </span><span class=\"token operator\" style=\"color:rgb(12, 150, 155)\">=</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">[</span><span class=\"token plain\">i </span><span class=\"token keyword\" style=\"color:rgb(12, 150, 155)\">for</span><span class=\"token plain\"> i </span><span class=\"token keyword\" style=\"color:rgb(12, 150, 155)\">in</span><span class=\"token plain\"> lst </span><span class=\"token keyword\" style=\"color:rgb(12, 150, 155)\">if</span><span class=\"token plain\"> i </span><span class=\"token operator\" style=\"color:rgb(12, 150, 155)\">&lt;=</span><span class=\"token plain\"> m</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">]</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#403f53\"><span class=\"token plain\">    right </span><span class=\"token operator\" style=\"color:rgb(12, 150, 155)\">=</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">[</span><span class=\"token plain\">i </span><span class=\"token keyword\" style=\"color:rgb(12, 150, 155)\">for</span><span class=\"token plain\"> i </span><span class=\"token keyword\" style=\"color:rgb(12, 150, 155)\">in</span><span class=\"token plain\"> lst </span><span class=\"token keyword\" style=\"color:rgb(12, 150, 155)\">if</span><span class=\"token plain\"> i </span><span class=\"token operator\" style=\"color:rgb(12, 150, 155)\">&gt;</span><span class=\"token plain\"> m</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">]</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#403f53\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:rgb(12, 150, 155)\">if</span><span class=\"token plain\"> </span><span class=\"token builtin\" style=\"color:rgb(72, 118, 214)\">len</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">(</span><span class=\"token plain\">left</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">)</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(12, 150, 155)\">==</span><span class=\"token plain\"> m </span><span class=\"token operator\" style=\"color:rgb(12, 150, 155)\">-</span><span class=\"token plain\"> l </span><span class=\"token operator\" style=\"color:rgb(12, 150, 155)\">+</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(170, 9, 130)\">1</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#403f53\"><span class=\"token plain\">        </span><span class=\"token keyword\" style=\"color:rgb(12, 150, 155)\">return</span><span class=\"token plain\"> min_free</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">(</span><span class=\"token plain\">right</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">,</span><span class=\"token plain\"> m </span><span class=\"token operator\" style=\"color:rgb(12, 150, 155)\">+</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(170, 9, 130)\">1</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">,</span><span class=\"token plain\"> u</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#403f53\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:rgb(12, 150, 155)\">else</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#403f53\"><span class=\"token plain\">        </span><span class=\"token keyword\" style=\"color:rgb(12, 150, 155)\">return</span><span class=\"token plain\"> min_free</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">(</span><span class=\"token plain\">left</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">,</span><span class=\"token plain\"> l</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">,</span><span class=\"token plain\"> m</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">)</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"复制代码到剪贴板\" title=\"复制\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<ol start=\"3\">\n<li>C++ <code>partition</code></li>\n</ol>\n<div class=\"language-cpp codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#403f53;--prism-background-color:#FBFBFB\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-cpp codeBlock_bY9V thin-scrollbar\" style=\"color:#403f53;background-color:#FBFBFB\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#403f53\"><span class=\"token macro property directive-hash\" style=\"color:rgb(12, 150, 155)\">#</span><span class=\"token macro property directive keyword\" style=\"color:rgb(12, 150, 155)\">include</span><span class=\"token macro property\" style=\"color:rgb(12, 150, 155)\"> </span><span class=\"token macro property string\" style=\"color:rgb(72, 118, 214)\">&lt;algorithm&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#403f53\"><span class=\"token plain\"></span><span class=\"token macro property directive-hash\" style=\"color:rgb(12, 150, 155)\">#</span><span class=\"token macro property directive keyword\" style=\"color:rgb(12, 150, 155)\">include</span><span class=\"token macro property\" style=\"color:rgb(12, 150, 155)\"> </span><span class=\"token macro property string\" style=\"color:rgb(72, 118, 214)\">&lt;vector&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#403f53\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:rgb(12, 150, 155)\">using</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:rgb(12, 150, 155)\">namespace</span><span class=\"token plain\"> std</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#403f53\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#403f53\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:rgb(12, 150, 155)\">int</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:rgb(153, 76, 195);font-style:italic\">min_free</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">(</span><span class=\"token plain\">vector</span><span class=\"token operator\" style=\"color:rgb(12, 150, 155)\">&lt;</span><span class=\"token keyword\" style=\"color:rgb(12, 150, 155)\">int</span><span class=\"token operator\" style=\"color:rgb(12, 150, 155)\">&gt;</span><span class=\"token double-colon punctuation\" style=\"color:rgb(153, 76, 195)\">::</span><span class=\"token plain\">iterator begin</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">,</span><span class=\"token plain\"> vector</span><span class=\"token operator\" style=\"color:rgb(12, 150, 155)\">&lt;</span><span class=\"token keyword\" style=\"color:rgb(12, 150, 155)\">int</span><span class=\"token operator\" style=\"color:rgb(12, 150, 155)\">&gt;</span><span class=\"token double-colon punctuation\" style=\"color:rgb(153, 76, 195)\">::</span><span class=\"token plain\">iterator end</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">,</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:rgb(12, 150, 155)\">int</span><span class=\"token plain\"> l</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">,</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:rgb(12, 150, 155)\">int</span><span class=\"token plain\"> u</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">)</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#403f53\"><span class=\"token plain\">  </span><span class=\"token keyword\" style=\"color:rgb(12, 150, 155)\">int</span><span class=\"token plain\"> m </span><span class=\"token operator\" style=\"color:rgb(12, 150, 155)\">=</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">(</span><span class=\"token plain\">l </span><span class=\"token operator\" style=\"color:rgb(12, 150, 155)\">+</span><span class=\"token plain\"> u</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">)</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(12, 150, 155)\">/</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(170, 9, 130)\">2</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#403f53\"><span class=\"token plain\">  </span><span class=\"token keyword\" style=\"color:rgb(12, 150, 155)\">if</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">(</span><span class=\"token plain\">begin </span><span class=\"token operator\" style=\"color:rgb(12, 150, 155)\">==</span><span class=\"token plain\"> end</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">)</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#403f53\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:rgb(12, 150, 155)\">return</span><span class=\"token plain\"> l</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#403f53\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#403f53\"><span class=\"token plain\">  </span><span class=\"token keyword\" style=\"color:rgb(12, 150, 155)\">auto</span><span class=\"token plain\"> it </span><span class=\"token operator\" style=\"color:rgb(12, 150, 155)\">=</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:rgb(153, 76, 195);font-style:italic\">partition</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">(</span><span class=\"token plain\">begin</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">,</span><span class=\"token plain\"> end</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">,</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">[</span><span class=\"token plain\">m</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">]</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">(</span><span class=\"token keyword\" style=\"color:rgb(12, 150, 155)\">int</span><span class=\"token plain\"> i</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">)</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">{</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:rgb(12, 150, 155)\">return</span><span class=\"token plain\"> i </span><span class=\"token operator\" style=\"color:rgb(12, 150, 155)\">&lt;=</span><span class=\"token plain\"> m</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">;</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">}</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">)</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#403f53\"><span class=\"token plain\">  </span><span class=\"token keyword\" style=\"color:rgb(12, 150, 155)\">if</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">(</span><span class=\"token plain\">it </span><span class=\"token operator\" style=\"color:rgb(12, 150, 155)\">-</span><span class=\"token plain\"> begin </span><span class=\"token operator\" style=\"color:rgb(12, 150, 155)\">==</span><span class=\"token plain\"> m </span><span class=\"token operator\" style=\"color:rgb(12, 150, 155)\">-</span><span class=\"token plain\"> l </span><span class=\"token operator\" style=\"color:rgb(12, 150, 155)\">+</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(170, 9, 130)\">1</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">)</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#403f53\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:rgb(12, 150, 155)\">return</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:rgb(153, 76, 195);font-style:italic\">min_free</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">(</span><span class=\"token plain\">it</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">,</span><span class=\"token plain\"> end</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">,</span><span class=\"token plain\"> m </span><span class=\"token operator\" style=\"color:rgb(12, 150, 155)\">+</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(170, 9, 130)\">1</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">,</span><span class=\"token plain\"> u</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">)</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#403f53\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">}</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:rgb(12, 150, 155)\">else</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#403f53\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:rgb(12, 150, 155)\">return</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:rgb(153, 76, 195);font-style:italic\">min_free</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">(</span><span class=\"token plain\">begin</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">,</span><span class=\"token plain\"> it</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">,</span><span class=\"token plain\"> l</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">,</span><span class=\"token plain\"> m</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">)</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#403f53\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#403f53\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">}</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"复制代码到剪贴板\" title=\"复制\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<p>上述解法的时间复杂度为 $O(n)$：第一次需要 $O(n)$ 次比较来划分子序列 $A'$ 和 $A''$，第二次需要 $O(n/2)$ 次，第三次需要 $O(n/4)$ 次 ... ，总时间复杂度为 $O(n+n/2+n/4+...) = O(2n) = O(n)$。</p>\n<p>该解法不需要使用额外的栈空间保存递归调用，是因为其中的递归调用都是尾递归，在函数式语言中等同于迭代；C++ 可以通过开启优化选项消除尾递归；特别的，Python 不支持尾递归优化。在这种情况下，空间复杂度为递归深度 $O(\\lg n)$。为了避免额外的空间占用，可以手工将递归转换为迭代：</p>\n<div class=\"language-cpp codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#403f53;--prism-background-color:#FBFBFB\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-cpp codeBlock_bY9V thin-scrollbar\" style=\"color:#403f53;background-color:#FBFBFB\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#403f53\"><span class=\"token macro property directive-hash\" style=\"color:rgb(12, 150, 155)\">#</span><span class=\"token macro property directive keyword\" style=\"color:rgb(12, 150, 155)\">include</span><span class=\"token macro property\" style=\"color:rgb(12, 150, 155)\"> </span><span class=\"token macro property string\" style=\"color:rgb(72, 118, 214)\">&lt;algorithm&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#403f53\"><span class=\"token plain\"></span><span class=\"token macro property directive-hash\" style=\"color:rgb(12, 150, 155)\">#</span><span class=\"token macro property directive keyword\" style=\"color:rgb(12, 150, 155)\">include</span><span class=\"token macro property\" style=\"color:rgb(12, 150, 155)\"> </span><span class=\"token macro property string\" style=\"color:rgb(72, 118, 214)\">&lt;vector&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#403f53\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:rgb(12, 150, 155)\">using</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:rgb(12, 150, 155)\">namespace</span><span class=\"token plain\"> std</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#403f53\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#403f53\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:rgb(12, 150, 155)\">int</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:rgb(153, 76, 195);font-style:italic\">min_free</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">(</span><span class=\"token plain\">vector</span><span class=\"token operator\" style=\"color:rgb(12, 150, 155)\">&lt;</span><span class=\"token keyword\" style=\"color:rgb(12, 150, 155)\">int</span><span class=\"token operator\" style=\"color:rgb(12, 150, 155)\">&gt;</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(12, 150, 155)\">&amp;</span><span class=\"token plain\">lst</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">)</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#403f53\"><span class=\"token plain\">  </span><span class=\"token keyword\" style=\"color:rgb(12, 150, 155)\">int</span><span class=\"token plain\"> l </span><span class=\"token operator\" style=\"color:rgb(12, 150, 155)\">=</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(170, 9, 130)\">0</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#403f53\"><span class=\"token plain\">  </span><span class=\"token keyword\" style=\"color:rgb(12, 150, 155)\">int</span><span class=\"token plain\"> u </span><span class=\"token operator\" style=\"color:rgb(12, 150, 155)\">=</span><span class=\"token plain\"> lst</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">.</span><span class=\"token function\" style=\"color:rgb(153, 76, 195);font-style:italic\">size</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">(</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">)</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(12, 150, 155)\">-</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(170, 9, 130)\">1</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#403f53\"><span class=\"token plain\">  </span><span class=\"token keyword\" style=\"color:rgb(12, 150, 155)\">auto</span><span class=\"token plain\"> begin </span><span class=\"token operator\" style=\"color:rgb(12, 150, 155)\">=</span><span class=\"token plain\"> lst</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">.</span><span class=\"token function\" style=\"color:rgb(153, 76, 195);font-style:italic\">begin</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">(</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">)</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#403f53\"><span class=\"token plain\">  </span><span class=\"token keyword\" style=\"color:rgb(12, 150, 155)\">auto</span><span class=\"token plain\"> end </span><span class=\"token operator\" style=\"color:rgb(12, 150, 155)\">=</span><span class=\"token plain\"> lst</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">.</span><span class=\"token function\" style=\"color:rgb(153, 76, 195);font-style:italic\">end</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">(</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">)</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#403f53\"><span class=\"token plain\">  </span><span class=\"token keyword\" style=\"color:rgb(12, 150, 155)\">while</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">(</span><span class=\"token plain\">end </span><span class=\"token operator\" style=\"color:rgb(12, 150, 155)\">-</span><span class=\"token plain\"> begin</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">)</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#403f53\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:rgb(12, 150, 155)\">int</span><span class=\"token plain\"> m </span><span class=\"token operator\" style=\"color:rgb(12, 150, 155)\">=</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">(</span><span class=\"token plain\">l </span><span class=\"token operator\" style=\"color:rgb(12, 150, 155)\">+</span><span class=\"token plain\"> u</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">)</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(12, 150, 155)\">/</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(170, 9, 130)\">2</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#403f53\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:rgb(12, 150, 155)\">auto</span><span class=\"token plain\"> left </span><span class=\"token operator\" style=\"color:rgb(12, 150, 155)\">=</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:rgb(153, 76, 195);font-style:italic\">partition</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">(</span><span class=\"token plain\">begin</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">,</span><span class=\"token plain\"> end</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">,</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">[</span><span class=\"token plain\">m</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">]</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">(</span><span class=\"token keyword\" style=\"color:rgb(12, 150, 155)\">int</span><span class=\"token plain\"> i</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">)</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">{</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:rgb(12, 150, 155)\">return</span><span class=\"token plain\"> i </span><span class=\"token operator\" style=\"color:rgb(12, 150, 155)\">&lt;=</span><span class=\"token plain\"> m</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">;</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">}</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">)</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#403f53\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:rgb(12, 150, 155)\">if</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">(</span><span class=\"token plain\">left </span><span class=\"token operator\" style=\"color:rgb(12, 150, 155)\">-</span><span class=\"token plain\"> begin </span><span class=\"token operator\" style=\"color:rgb(12, 150, 155)\">==</span><span class=\"token plain\"> m </span><span class=\"token operator\" style=\"color:rgb(12, 150, 155)\">-</span><span class=\"token plain\"> l </span><span class=\"token operator\" style=\"color:rgb(12, 150, 155)\">+</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(170, 9, 130)\">1</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">)</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#403f53\"><span class=\"token plain\">      begin </span><span class=\"token operator\" style=\"color:rgb(12, 150, 155)\">=</span><span class=\"token plain\"> left</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#403f53\"><span class=\"token plain\">      l </span><span class=\"token operator\" style=\"color:rgb(12, 150, 155)\">=</span><span class=\"token plain\"> m </span><span class=\"token operator\" style=\"color:rgb(12, 150, 155)\">+</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(170, 9, 130)\">1</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#403f53\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">}</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:rgb(12, 150, 155)\">else</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#403f53\"><span class=\"token plain\">      end </span><span class=\"token operator\" style=\"color:rgb(12, 150, 155)\">=</span><span class=\"token plain\"> left</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#403f53\"><span class=\"token plain\">      u </span><span class=\"token operator\" style=\"color:rgb(12, 150, 155)\">=</span><span class=\"token plain\"> m</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#403f53\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#403f53\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#403f53\"><span class=\"token plain\">  </span><span class=\"token keyword\" style=\"color:rgb(12, 150, 155)\">return</span><span class=\"token plain\"> l</span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#403f53\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(153, 76, 195)\">}</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"复制代码到剪贴板\" title=\"复制\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<p>这段程序使用了类似快速排序的分割方法，将数组中的元素分为了两部分：所有 left 之前的元素都小于等于 m，所有 left 和 right 之间的元素都大于 m。</p>",
            "url": "https://blog.uoiai.me/2022/02/05/minimum-free-id",
            "title": "最小可用 id",
            "summary": "什么是最小可用 id？",
            "date_modified": "2022-02-05T00:00:00.000Z",
            "tags": [
                "算法新解",
                "算法"
            ]
        }
    ]
}